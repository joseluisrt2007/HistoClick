<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Organizacion-Etapas</title>

  <!-- Fuente Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1c1c1c);
      color: #f8f8f2;
    }

    body {
      display: flex;
      flex-direction: column;
      height: 100vh;
      margin: 0;
    }

    header {
 position: relative;
  display: flex;
  align-items: center;
  justify-content: center; /* centro el texto */
  padding: 20px;
  background: linear-gradient(90deg, #5a4de8, #8366f1);
  color: #f0e9ff;
  font-size: clamp(1.8rem, 4vw, 3rem);
  font-weight: 700;
  font-family: 'Poppins', sans-serif;
  box-shadow: 0 6px 18px rgba(83, 75, 180, 0.6);
  letter-spacing: 1.5px;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.35);
  user-select: none;
}

.header-title {
  flex: 1;
  text-align: center;
  user-select: none;
}

.back-button {
  position: absolute;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #f0e9ff;
  font-size: 2rem;
  font-weight: bold;
  cursor: pointer;
  user-select: none;
  padding: 0;
  margin: 0;
  line-height: 1;
  text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.4);
  outline: none;
  box-shadow: none;
}

.back-button:hover {
  color: #f0e9ff; /* mismo color, sin cambio */
}
.back-button:focus,
.back-button:active {
  outline: none;
  box-shadow: none;
}

.back-button:hover,
header:hover .back-button {
  color: #f0e9ff; /* mismo color, sin cambio */
  background: none;
}


header:hover {
      background: linear-gradient(90deg, #8366f1, #5a4de8);
      cursor: default;
    }


    .carousel {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      perspective: 1200px;
      width: 100%;
      padding: 0 60px;
      box-sizing: border-box;
      position: relative;
    }

    .cards {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .card {
      position: absolute;
      width: 340px;
      height: 320px;
      background: linear-gradient(135deg, #7b3fe4, #4f46e5);
      color: #e0d7ff;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 0 8px rgba(127, 90, 255, 0.4);
      transition: transform 0.5s ease, opacity 0.5s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      user-select: none;
      backdrop-filter: blur(8px);
      text-shadow: 0 0 4px rgba(0, 0, 0, 0.4);
    }

    .card h2 {
      font-weight: 700;
      margin-bottom: 10px;
      color: #d6c4a0;
    }

    .card p {
      color: #f8f8f2;
      font-weight: 500;
    }

    .card.center {
      transform: translateX(0) translateZ(150px) rotateY(0deg) scale(1.2);
      opacity: 1;
      z-index: 3;
      background: linear-gradient(135deg, #a78bfa, #6366f1);
      box-shadow: 0 0 18px #a78bfa;
      color: #ffffff;
    }

    .card.center:hover {
      box-shadow: 0 0 25px #bfaaff;
    }

    .card.left {
      transform: translateX(-360px) translateZ(70px) rotateY(25deg) scale(0.9);
      opacity: 0.5;
      z-index: 2;
      background: linear-gradient(135deg, #5a3e8f, #3a2b7a);
      box-shadow: 0 0 6px rgba(90, 62, 143, 0.25);
      color: #c2b1ea;
    }

    .card.right {
      transform: translateX(360px) translateZ(70px) rotateY(-25deg) scale(0.9);
      opacity: 0.5;
      z-index: 2;
      background: linear-gradient(135deg, #5a3e8f, #3a2b7a);
      box-shadow: 0 0 6px rgba(90, 62, 143, 0.25);
      color: #c2b1ea;
    }

    .card.hidden {
      opacity: 0;
      pointer-events: none;
      transform: translateX(0) translateZ(0) scale(0.7);
      z-index: 1;
    }

    .card img.full {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 20px;
      box-shadow: inset 0 0 12px rgba(63, 54, 103, 0.4);
      transition: transform 0.3s ease;
    }

    .card.center:hover img.full {
      transform: scale(1.05);
      box-shadow: inset 0 0 20px rgba(167, 139, 250, 0.6);
    }

    button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(90deg, #5a4de8, #8366f1);
      border: none;
      color: white;
      font-size: 2em;
      width: 45px;
      height: 70px;
      cursor: pointer;
      border-radius: 8px;
      user-select: none;
      z-index: 10;
      box-shadow: 0 0 8px rgba(127, 90, 255, 0.4);
      transition: background 0.3s ease;
    }

    button.btn-left {
      left: 20px;
    }

    button.btn-right {
      right: 20px;
    }

    button:hover {
      background: linear-gradient(90deg, #8366f1, #5a4de8);
    }

    button:active {
      background: #4b3cc0;
    }

    @media (max-width: 700px) {
      header {
        font-size: 1.8em;
        padding: 15px;
      }

      @media (max-width: 700px) {
  button {
    font-size: 2.2em;
    height: 60px;
    width: 50px;
  }
}
      @media (max-width: 700px) {
  .btn-left,
  .btn-right {
    display: none;
  }
}

      .carousel {
        height: auto;
        padding: 0 20px;
      }

      .card {
        width: 80vw;
        max-width: 340px;
        margin: 0 auto;
      }

      .card.left {
        transform: translateX(-90vw) translateZ(30px) rotateY(25deg) scale(0.8);
      }

      .card.right {
        transform: translateX(90vw) translateZ(30px) rotateY(-25deg) scale(0.8);
      }

      button.btn-left {
        left: 10px;
      }

      button.btn-right {
        right: 10px;
      }
    }

  </style>
</head>
<body>


<header>
  <button class="back-button" onclick="history.back()" aria-label="Regresar">⟵</button>
  <div class="header-title">Organización (1811–1815)</div>
</header>

<div class="carousel">
  <button class="btn btn-left" aria-label="Anterior">&lt;</button>
  <div class="cards" id="cards">
    <div class="card"><img class="full" src="imagenes/organizacion.jpg" /></div>

    <div class="card"><h2>Reorganización tras la caída de Hidalgo</h2>
  <p>Después de la ejecución de Miguel Hidalgo, el movimiento insurgente quedó momentáneamente desorganizado. Sin embargo, otros líderes como Ignacio López Rayón y José María Morelos comenzaron a reestructurar el esfuerzo revolucionario con mayor orden y visión estratégica.</p><audio src="audios/organizacion-a1.mp3"></audio></div>

<div class="card"><h2>Acciones de Ignacio López Rayón</h2>
  <p>Rayón organizó la Junta de Zitácuaro en 1811 con la intención de crear un gobierno insurgente. Aunque fue atacada y disuelta rápidamente, representó un primer intento de institucionalizar el movimiento y establecer un sistema legal propio.</p><audio src="audios/organizacion-a2.mp3"></audio></div>

<div class="card"><h2>Ascenso de José María Morelos</h2>
  <p>José María Morelos asumió el liderazgo en el sur del país. Su preparación intelectual, disciplina militar y carisma personal le permitieron organizar un ejército más estructurado, con objetivos claros y estrategias definidas en distintos frentes.</p><audio src="audios/organizacion-a3.mp3"></audio></div>

<div class="card"><h2>Campañas militares exitosas</h2>
  <p>Morelos dirigió campañas victoriosas en el sur y centro del virreinato. Tomó ciudades como Oaxaca, Chilpancingo y Acapulco, consolidando bastiones insurgentes y debilitando la autoridad virreinal en varias regiones importantes de la Nueva España.</p><audio src="audios/organizacion-a4.mp3"></audio></div>

<div class="card"><h2>Congreso de Chilpancingo</h2>
  <p>En 1813, Morelos convocó el Congreso de Anáhuac en Chilpancingo, donde se declaró formalmente la independencia de México. Este congreso también redactó los “Sentimientos de la Nación”, documento clave en la historia constitucional del país.</p><audio src="audios/organizacion-a5.mp3"></audio></div>

<div class="card"><h2>Constitución de Apatzingán</h2>
  <p>En 1814, el Congreso insurgente promulgó la Constitución de Apatzingán, basada en principios republicanos y de soberanía popular. Aunque nunca se aplicó plenamente, sentó las bases del pensamiento político mexicano independiente.</p><audio src="audios/organizacion-a6.mp3"></audio></div>

<div class="card"><h2>Resistencia frente al ejército realista</h2>
  <p>A pesar de sus avances, los insurgentes enfrentaron una creciente presión militar de las fuerzas realistas. Estas contaban con mejor armamento y apoyo logístico, lo que dificultó la expansión de los logros obtenidos por Morelos y su ejército.</p><audio src="audios/organizacion-a7.mp3"></audio></div>

<div class="card"><h2>Captura de Morelos</h2>
  <p>En 1815, Morelos fue capturado en Temalaca mientras escoltaba al Congreso. Fue juzgado por la Inquisición y ejecutado en diciembre, lo cual representó un golpe devastador para la causa independentista en esta etapa.</p><audio src="audios/organizacion-a8.mp3"></audio></div>

<div class="card"><h2>Legado de la etapa organizativa</h2>
  <p>La etapa de organización dejó una estructura política, documentos fundamentales y una conciencia clara de los ideales del movimiento. Aunque fue una fase dura, sembró las bases institucionales para los siguientes pasos hacia la independencia.</p><audio src="audios/organizacion-a9.mp3"></audio></div>

  </div>
  <button class="btn btn-right" aria-label="Siguiente">&gt;</button>
</div>

<script>
  const cards = [...document.querySelectorAll('.card')];
  const btnLeft = document.querySelector('.btn-left');
  const btnRight = document.querySelector('.btn-right');
  let current = 0;
  let currentAudio = null;

  function updatePositions() {
    const total = cards.length;
    cards.forEach((card, i) => {
      card.classList.remove('left', 'center', 'right', 'hidden');
      let pos = (i - current + total) % total;
      if (pos === 0) {
        card.classList.add('center');
      } else if (pos === 1) {
        card.classList.add('right');
      } else if (pos === total - 1) {
        card.classList.add('left');
      } else {
        card.classList.add('hidden');
      }
    });
  }

  function playAudioForCenterCard() {
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }

    const centerCard = document.querySelector('.card.center');
    const audio = centerCard.querySelector('audio');
    if (audio) {
      currentAudio = audio;
      audio.play().catch(e => console.log("Reproducción bloqueada hasta que el usuario interactúe"));
    }
  }

  function updatePositionsWithAudio() {
    updatePositions();
    playAudioForCenterCard();
  }

  btnLeft.addEventListener('click', () => {
    current = (current - 1 + cards.length) % cards.length;
    updatePositionsWithAudio();
  });

  btnRight.addEventListener('click', () => {
    current = (current + 1) % cards.length;
    updatePositionsWithAudio();
  });

  updatePositionsWithAudio(); // inicializa la primera tarjeta con audio

  let startX = 0;
let endX = 0;

const carousel = document.querySelector('.carousel');

carousel.addEventListener('touchstart', (e) => {
  startX = e.touches[0].clientX;
}, false);

carousel.addEventListener('touchend', (e) => {
  endX = e.changedTouches[0].clientX;
  handleGesture();
}, false);

function handleGesture() {
  const diffX = endX - startX;

  if (Math.abs(diffX) > 50) { // umbral mínimo para que cuente como deslizamiento
    if (diffX > 0) {
      // swipe hacia la derecha (anterior)
      current = (current - 1 + cards.length) % cards.length;
    } else {
      // swipe hacia la izquierda (siguiente)
      current = (current + 1) % cards.length;
    }
    updatePositionsWithAudio();
  }
}
</script>

</body>
</html>